import folium

line_segments = [
    # ((34.958242, 137.143170), (34.958405, 137.143268)),  # 自宅 テスト用ライン１
    # ((34.958263, 137.143110), (34.958422, 137.143223)),  # 自宅 テスト用ライン２
    # ((34.958177, 137.143282), (34.958190, 137.143408)),  # 自宅 テスト用ライン１
    # ((34.958229, 137.143353), (34.958422, 137.143223)),  # 自宅 テスト用ライン２
    # ((35.222120, 138.903772), (35.222156, 138.903682)),  # 東富士 第二水直 南側
    # ((35.228230, 138.907711), (35.228202, 138.907791)),  # 東富士 第二水直 北側
    # ((35.227363, 138.898499), (35.227162, 138.898976)),  # 東富士第1周回路 南バンク
    # ((35.229320, 138.907466), (35.229140, 138.907891)),  # 東富士第1周回路 南バンク
    # ((35.231023, 138.889509), (35.231027, 138.889901)),  # 東富士第3周回路 内周路１
    # ((35.232067, 138.888676), (35.231789, 138.888647)),  # 東富士第3周回路 内周路２
    # ((35.232486, 138.887550), (35.232614, 138.887853)),  # 東富士第3周回路 内周路３
    # ((35.233201, 138.886413), (35.232819, 138.886490)),  # 東富士第3周回路 内周路４
    # ((35.234496, 138.885182), (35.234388, 138.885701)),  # 東富士第3周回路 内周路５
    # ((35.235484, 138.885094), (35.235492, 138.885678)),  # 東富士第3周回路 内周路６
    # ((35.233363, 138.888180), (35.233004, 138.888113)),  # 東富士第3周回路 内周路７

    # ((35.230841, 138.889401), (35.230813, 138.889936), 0),  # 東富士第3周回路 内周路１
    # ((35.232091, 138.888844), (35.231729, 138.888825), 0),  # 東富士第3周回路 内周路２
    # ((35.232522, 138.887481), (35.232571, 138.887966), 0),  # 東富士第3周回路 内周路３
    # ((35.233258, 138.886680), (35.232938, 138.886735), 0),  # 東富士第3周回路 内周路４
    # ((35.234392, 138.885085), (35.234292, 138.885730), 0),  # 東富士第3周回路 内周路５
    # ((35.235484, 138.885094), (35.235492, 138.885678), 0),  # 東富士第3周回路 内周路６
    # ((35.233363, 138.888180), (35.233004, 138.888113), 0),  # 東富士第3周回路 内周路７

    # E1 まわりのテスト用
    # ((35.225698, 138.906106), (35.225457, 138.906664), 0),  # 東富士 E1周り １
    # ((35.224649, 138.905526), (35.224530, 138.905797), 0),  # 東富士 E1周り ２
    # ((35.224213, 138.905272), (35.224139, 138.905513), 0),  # 東富士 E1周り ４
    # ((35.224327, 138.907800), (35.224208, 138.908054), 0.5),  # 東富士 E1周り ５
    # ((35.225436, 138.907942), (35.225472, 138.908142), 0),  # 東富士 E1周り ６
    # ((35.22557846, 138.90663924), (35.22581362, 138.90616892), 0, "brake"),  # 東富士 E1周り １
    # ((35.22495862, 138.90622436), (35.22523028, 138.90578450), 0, "brake"),  # 東富士 E1周り ２
    # ((35.22441359, 138.90512185), (35.22406875, 138.90572829), 5.5, "left" ),  # 東富士 E1周り ４
    # ((35.22404685, 138.90816530), (35.22431716, 138.90763083), 0, "brake"),  # 東富士 E1周り ５
    # ((35.22542605, 138.90836011), (35.22526490, 138.90776325), 6.0, "left" ),  # 東富士 E1周り ６

    # 中研さんRパーク 3/21最終版から２版のラインを延長
    # ((35.169188, 137.053708), (35.169259, 137.053923), 0),  # 中研さん Rパーク １
    # ((35.168922, 137.053700), (35.168952, 137.054036), 0),  # 中研さん Rパーク ２
    # ((35.169166, 137.054234), (35.169210, 137.054400), 0),  # 中研さん Rパーク ３
    # ((35.168816, 137.054288), (35.168877, 137.054492), 0),  # 中研さん Rパーク ４
   
    # 中研さんRパーク 3/21最終
    # ((35.169188, 137.053708), (35.169259, 137.053923), 0),  # 中研さん Rパーク １
    # ((35.168934, 137.053837), (35.168952, 137.054036), 0),  # 中研さん Rパーク ２
    # ((35.169166, 137.054234), (35.169210, 137.054400), 0),  # 中研さん Rパーク ３
    # ((35.168816, 137.054288), (35.168877, 137.054492), 0),  # 中研さん Rパーク ４

    # B11 まわりのテスト用
    # ((35.22866095, 138.89613767), (35.22841026, 138.89567952), 0, "brake"),  # 東富士 B11周り １
    # ((35.22864761, 138.89668518), (35.22824148, 138.89692372), 0, "brake"),  # 東富士 B11周り ２
    # ((35.22929958, 138.89661888), (35.22957014, 138.89705977), 9, "brake"),  # 東富士 B11周り ３
    # ((35.22949773, 138.89603500), (35.22990029, 138.89578755), 0, "brake"),  # 東富士 B11周り ４

    # モビインテスト
    # ((35.23140858, 138.90724043), (35.23119865, 138.90771083), 0, "brake"),  # 東富士 B11周り １
    # 一本松駐車場
    ((35.22416593, 138.90059797), (35.22393077, 138.90106828), 0, "brake"),  # 東富士 B11周り １

    # 必要に応じて追加
]


# 中心座標を計算
center_lat = sum(p1[0] + p2[0] for p1, p2, *_ in line_segments) / (2 * len(line_segments))
center_lon = sum(p1[1] + p2[1] for p1, p2, *_ in line_segments) / (2 * len(line_segments))

# Folium地図の作成
m = folium.Map(location=[center_lat, center_lon], zoom_start=16)

# ラインを地図に追加
for i, (p1, p2, *_) in enumerate(line_segments, start=1):
    folium.PolyLine([p1, p2], color="red", weight=3, opacity=0.8).add_to(m)
    
    # ラインの中心座標を計算
    mid_lat = (p1[0] + p2[0]) / 2
    mid_lon = (p1[1] + p2[1]) / 2

    # 番号ラベルを追加
    folium.Marker(
        location=[mid_lat, mid_lon],
        icon=folium.DivIcon(
            html=f'<div style="font-size: 12pt; color: black; font-weight: bold;">{i}</div>'
        )
    ).add_to(m)

# 地図を保存
m.save("map.html")

# Jupyter Notebookの場合
m